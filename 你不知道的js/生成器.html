<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>

</head>

<body>
</body>

</html>
<script>
  // var x = 1;

  // function* foo() {
  //   x++;
  //   yield; // 暂停!
  //   console.log("x:", x);
  // }

  // function bar() {
  //   x++;
  // }

  // function* foo() {
  //   var x = yield 2;
  //   z++;
  //   var y = yield(x * z);
  //   console.log(x, y, z);
  // }
  // var z = 1;
  // var it1 = foo();
  // console.log('it1: ', it1);
  // var it2 = foo();
  // // console.log('it2: ', it2);
  // var val1 = it1.next().value;
  // // console.log('val1: ', val1);
  // var val2 = it2.next().value;
  // // console.log('val2: ', val2);
  // val1 = it1.next(val2 * 10).value;
  // // console.log('val1: ', val1);
  // val2 = it2.next(val1 * 5).value;
  // console.log('val2: ', val2);
  // it1.next(val2 / 2);
  // it2.next(val1 / 4);

  // function* foo() {
  //   a++;
  //   yield;
  //   b = b * a;
  //   a = (yield b) + 3;
  // }

  // function* bar() {
  //   b--;
  //   yield;
  //   a = (yield 8) + b;
  //   b = a * (yield 2);
  // }

  // function step(gen) {
  //   var it = gen();
  //   var last;
  //   return function () {
  //     // 不管yield出来的是什么，下一次都把它原样传回去! 
  //     last = it.next(last).value;
  //   };
  // }
  // a = 1;
  // b = 2;
  // var s1 = step(foo);
  // var s2 = step(bar);
  // s2(); // b--;
  // s2(); // yield 8
  // s1(); // a++;
  // s2(); // a = 8 + b;
  // // yield 2
  // s1(); // b = b * a;
  // // yield b
  // s1(); // a = b + 3;
  // s2(); // b = a * 2;

  // function* foo() {
  //   console.log("*foo() starting");
  //   yield 3;
  //   yield 4;
  //   console.log("*foo() finished");
  // }

  // function* bar() {
  //   yield 1;
  //   yield 2;
  //   yield* foo();
  //   yield 5;
  // }
  // var it = bar();
  // console.log(it.next().value);
  // console.log(it.next().value);
  // console.log(it.next().value);
  // console.log(it.next().value);
  // console.log(it.next().value);

  function foo(x, y, cb) {
    setTimeout(function () {
      cb(x + y);
    }, 100);
  }

  // function fooThunk(cb) {
  //   foo(3, 4, cb);
  // }
  // // 将来
  // fooThunk(function (sum) {});

  function thunkify(fn) {
    var args = [].slice.call(arguments, 1);
    return function (cb) {
      args.push(cb);
      return fn.apply(null, args);
    };
  }
  var fooThunk = thunkify(foo, 3, 4);
  // 将来
  fooThunk(function (sum) {
    console.log(sum); // 7
  });
</script>
