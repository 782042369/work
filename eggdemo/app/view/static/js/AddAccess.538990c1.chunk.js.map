{"version":3,"sources":["tool/getUrlParam.js","api/access.js","views/access/AddAccess.jsx"],"names":["getUrlParam","name","window","location","search","reg","RegExp","r","substr","match","strValue","unescape","__webpack_require__","d","__webpack_exports__","accesslist","addaccess","editaccess","deleteaccess","findaccesslist","_tool_request__WEBPACK_IMPORTED_MODULE_0__","data","request","url","method","Option","antd_lib_select__WEBPACK_IMPORTED_MODULE_14___default","a","WrappedRegistrationForm","props","_this","Object","_Users_yanghongxuan_job_yang_h5_admin_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_8__","this","_Users_yanghongxuan_job_yang_h5_admin_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_10__","_Users_yanghongxuan_job_yang_h5_admin_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_11__","call","handleSubmit","e","preventDefault","form","validateFieldsAndScroll","err","values","sort","Number","arr","id","assign","then","res","console","log","antd_lib_message__WEBPACK_IMPORTED_MODULE_7___default","success","message","catch","error","renderOptions","state","accessdata","map","element","react__WEBPACK_IMPORTED_MODULE_15___default","createElement","key","_id","value","module_name","title","roledata","_this2","module_id","status","setState","_this3","getlist","_res$data$","action_name","description","type","setFieldsValue","getFieldDecorator","antd_lib_form__WEBPACK_IMPORTED_MODULE_3___default","labelCol","xs","span","sm","wrapperCol","onSubmit","Item","label","rules","required","antd_lib_input__WEBPACK_IMPORTED_MODULE_5___default","placeholder","onChange","handleChange","offset","antd_lib_button__WEBPACK_IMPORTED_MODULE_1___default","htmlType","Component","manger","create"],"mappings":"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","file":"static/js/AddAccess.538990c1.chunk.js","sourcesContent":["/*\n * @Author: 杨宏旋\n * @LastEditors: 杨宏旋\n * @Description: url参数\n * @Date: 2019-05-06 17:53:48\n * @LastEditTime: 2019-05-07 09:54:57\n */\n/**\n * \n * @param {*} name 获取url参数名\n */\nconst getUrlParam = (name) => {\n  if (window.location.search) {\n    var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\");\n    var r = window.location.search.substr(1).match(reg);\n    var strValue = \"\";\n    if (r != null) {\n      strValue = unescape(r[2]);\n    }\n    return strValue;\n  } else {\n    return false;\n  }\n}\nexport default getUrlParam;\n","/*\n * @Author: 杨宏旋\n * @LastEditors: 杨宏旋\n * @Description: access\n * @Date: 2019-05-05 17:09:31\n * @LastEditTime: 2019-05-08 13:43:42\n */\n\nimport request from '../tool/request'\n\nexport function accesslist(data) {\n  // 列表\n  return request({\n    url: 'admin/Accesslist',\n    method: 'post',\n    data\n  })\n}\nexport function addaccess(data) {\n  // 增加\n  return request({\n    url: 'admin/AddAccess',\n    method: 'post',\n    data\n  })\n}\nexport function editaccess(data) {\n  // 修改\n  return request({\n    url: 'admin/EditAccess',\n    method: 'put',\n    data\n  })\n}\nexport function deleteaccess(data) {\n  // 删除\n  return request({\n    url: 'admin/DeleteAccess',\n    method: 'delete',\n    data\n  })\n}\nexport function findaccesslist(data) {\n  // 删除\n  return request({\n    url: 'admin/FindAccessList',\n    method: 'get',\n    data\n  })\n}\n","/*\n * @Author: 杨宏旋\n * @LastEditors: 杨宏旋\n * @Description: 权限\n * @Date: 2019-05-05 15:48:39\n * @LastEditTime: 2019-05-17 12:20:11\n */\nimport React, { Component } from 'react'\nimport { addaccess, editaccess, accesslist } from '../../api/access'\nimport getUrlParam from '../../tool/getUrlParam'\nimport { Form, Input, Button, message, Select } from 'antd'\nconst Option = Select.Option\n\nclass WrappedRegistrationForm extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\ttitle: '',\n\t\t\taccessdata: [],\n\t\t\troledata: []\n\t\t}\n\t}\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault()\n\t\tthis.props.form.validateFieldsAndScroll((err, values) => {\n\t\t\tif (!err) {\n\t\t\t\tvalues.sort = Number(values.sort)\n\t\t\t\tif (getUrlParam('id')) {\n\t\t\t\t\tlet arr = { id: getUrlParam('id') }\n\t\t\t\t\teditaccess(Object.assign(values, arr))\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\tmessage.success(res.message)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\tmessage.error(err.message)\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\taddaccess(values)\n\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\tmessage.success(res.message)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t\tmessage.error(err.message)\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\tgetlist() {\n\t\taccesslist({ module_id: 0 })\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 1) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\taccessdata: res.data\n\t\t\t\t\t})\n\t\t\t\t\tconsole.log('this.state.accessdata: ', this.state.accessdata)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log('err: ', err)\n\t\t\t})\n\t}\n\tcomponentDidMount() {\n\t\tthis.getlist()\n\t\tif (getUrlParam('id')) {\n\t\t\tthis.setState({\n\t\t\t\ttitle: '修改'\n\t\t\t})\n\t\t\taccesslist({\n\t\t\t\t_id: getUrlParam('id')\n\t\t\t})\n\t\t\t\t.then((res) => {\n\t\t\t\t\tlet { action_name, description, module_id, module_name, sort, status, type, url } = res.data[0]\n\t\t\t\t\tthis.props.form.setFieldsValue({\n\t\t\t\t\t\taction_name,\n\t\t\t\t\t\tdescription,\n\t\t\t\t\t\tmodule_id,\n\t\t\t\t\t\tmodule_name,\n\t\t\t\t\t\tsort,\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\turl\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.log('err: ', err)\n\t\t\t\t})\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\ttitle: '增加'\n\t\t\t})\n\t\t}\n\t}\n\trenderOptions = () => {\n\t\tconsole.log('this.state.accessdata: ', this.state.accessdata)\n\t\treturn this.state.accessdata.map((element) => (\n\t\t\t<Option key={element._id} value={element._id}>\n\t\t\t\t{element.module_name}\n\t\t\t</Option>\n\t\t))\n\t}\n\trender() {\n\t\tconst { getFieldDecorator } = this.props.form\n\n\t\tconst formItemLayout = {\n\t\t\tlabelCol: {\n\t\t\t\txs: { span: 24 },\n\t\t\t\tsm: { span: 8 }\n\t\t\t},\n\t\t\twrapperCol: {\n\t\t\t\txs: { span: 24 },\n\t\t\t\tsm: { span: 16 }\n\t\t\t}\n\t\t}\n\t\tconst tailFormItemLayout = {\n\t\t\twrapperCol: {\n\t\t\t\txs: {\n\t\t\t\t\tspan: 24,\n\t\t\t\t\toffset: 0\n\t\t\t\t},\n\t\t\t\tsm: {\n\t\t\t\t\tspan: 16,\n\t\t\t\t\toffset: 8\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<Form {...formItemLayout} onSubmit={this.handleSubmit}>\n\t\t\t\t<h1>{this.state.title}权限</h1>\n\t\t\t\t<Form.Item label=\"模块名称\">\n\t\t\t\t\t{getFieldDecorator('module_name', {\n\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: 'Please input your title!'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})(<Input placeholder=\"请输入\" />)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"节点名称\">\n\t\t\t\t\t{getFieldDecorator('type', {\n\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: 'Please input your description!'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})(\n\t\t\t\t\t\t//1、表示模块 2、表示菜单 3、操作\n\t\t\t\t\t\t<Select onChange={this.handleChange}>\n\t\t\t\t\t\t\t<Option key={1} value={1}>\n\t\t\t\t\t\t\t\t模块\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t<Option key={2} value={2}>\n\t\t\t\t\t\t\t\t菜单\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t<Option key={3} value={3}>\n\t\t\t\t\t\t\t\t操作\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"操作名称\">{getFieldDecorator('action_name')(<Input placeholder=\"请输入\" />)}</Form.Item>\n\t\t\t\t<Form.Item label=\"操作地址\">{getFieldDecorator('url')(<Input placeholder=\"请输入\" />)}</Form.Item>\n\t\t\t\t<Form.Item label=\"所属模块\">\n\t\t\t\t\t{getFieldDecorator('module_id', {\n\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: 'Please input your description!'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})(\n\t\t\t\t\t\t<Select onChange={this.handleChange}>\n\t\t\t\t\t\t\t<Option key={0} value={0}>\n\t\t\t\t\t\t\t\t顶级模块\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t{this.renderOptions()}\n\t\t\t\t\t\t</Select>\n\t\t\t\t\t)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"排序\">\n\t\t\t\t\t{getFieldDecorator('sort', {\n\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: 'Please input your description!'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})(<Input placeholder=\"请输入\" />)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item label=\"描述\">\n\t\t\t\t\t{getFieldDecorator('description', {\n\t\t\t\t\t\trules: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tmessage: 'Please input your description!'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t})(<Input placeholder=\"请输入\" />)}\n\t\t\t\t</Form.Item>\n\t\t\t\t<Form.Item {...tailFormItemLayout}>\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\">\n\t\t\t\t\t\t提交\n\t\t\t\t\t</Button>\n\t\t\t\t</Form.Item>\n\t\t\t</Form>\n\t\t)\n\t}\n}\nconst manger = Form.create({ name: 'register' })(WrappedRegistrationForm)\nexport default manger\n"],"sourceRoot":""}