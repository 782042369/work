(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{284:function(e,t,n){"use strict";t.a=function(e){if(window.location.search){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t),a="";return null!=n&&(a=unescape(n[2])),a}return!1}},394:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return s});var a=n(29);function c(e){return Object(a.a)({url:"admin/Accesslist",method:"post",data:e})}function i(e){return Object(a.a)({url:"admin/AddAccess",method:"post",data:e})}function r(e){return Object(a.a)({url:"admin/EditAccess",method:"put",data:e})}function o(e){return Object(a.a)({url:"admin/DeleteAccess",method:"delete",data:e})}function s(e){return Object(a.a)({url:"admin/FindAccessList",method:"get",data:e})}},572:function(e,t,n){"use strict";n.r(t);n(251);var a=n(252),c=n.n(a),i=(n(365),n(366)),r=n.n(i),o=(n(125),n(81)),s=n.n(o),l=n(18),u=n(19),h=n(22),d=n(20),f=n(21),m=(n(368),n(256)),p=n.n(m),b=n(1),k=n.n(b),g=n(394),v=n(85),E=n(284),O=n(100),A=p.a.Group,L=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e,t){var a=n.state,c=a.checkAll,i=a.checkedList,r=a.indeterminate,o=a.boxList[e];i[e]=t,r[e]=!!i[e].length&&i[e].length<o.length,c[e]=i[e].length===o.length,n.setState({checkedList:i,indeterminate:r,checkAll:c})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){var a=n.state.checkedList,c=[];n.state.plainOptions.forEach(function(e,t){a[t].length>0&&c.push({key:e._id,checkedList:a[t]})}),Object(v.b)({role_id:Object(E.a)("id"),access_node:c}).then(function(e){console.log("res: ",e),s.a.success(e.message)}).catch(function(e){console.log("err: ",e)})}})},n.state={checkedList:[],boxList:[],indeterminate:[],checkAll:[],plainOptions:[]},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"onCheckAllChange",value:function(e,t){var n=this.state,a=n.checkAll,c=n.checkedList,i=n.indeterminate,r=n.boxList;c[e]=t.target.checked?r[e].map(function(e){return e.value}):[],i[e]=!1,a[e]=t.target.checked,this.setState({checkedList:c,indeterminate:i,checkAll:a})}},{key:"getlist",value:function(){var e=this;Object(g.e)().then(function(t){1===t.status?e.Checkboxarr(t):s.a.error(t)}).catch(function(e){console.log("err: ",e),s.a.error(e)})}},{key:"componentWillMount",value:function(){var e=this;this.getlist(),Object(v.c)({role_id:Object(E.a)("id")}).then(function(t){if(t.data.length>0){var n=e.state,a=n.checkAll,c=n.checkedList,i=n.indeterminate,r=n.boxList;Object(O.a)(t.data,"pid","parent_id").forEach(function(t){e.state.plainOptions.forEach(function(e,n){if(e._id===t.parent_id){var o=[];t.items.map(function(e){return o.push(e.access_id)}),c[n]=o,a[n]=c[n].length===r[n].length,i[n]=!!c[n].length&&c[n].length<r[n].length}})}),e.setState({title:"\u4fee\u6539",checkedList:c,indeterminate:i,checkAll:a})}else e.setState({title:"\u589e\u52a0"})}).catch(function(e){console.log("err: ",e)})}},{key:"Checkboxarr",value:function(e){var t=[];e.data.forEach(function(e,n){t[n]=[],e.items.forEach(function(e){t[n].push({label:e.module_name,value:e._id})})});var n=Array.from({length:e.data.length},function(){return!1}),a=Array.from({length:e.data.length},function(){return[]}),c=Array.from({length:e.data.length},function(){return!1});1===e.status&&this.setState({plainOptions:e.data,checkedList:a,indeterminate:n,checkAll:c,boxList:t})}},{key:"Checkboxinit",value:function(){var e=this,t=this.props.form.getFieldDecorator;return this.state.plainOptions.map(function(n,a){return k.a.createElement(r.a.Item,{key:n._id},t("".concat(a+n._id),{valuePropName:"checked",initialValue:[]})(k.a.createElement("div",{className:"checkbox"},k.a.createElement("div",{style:{borderBottom:"1px solid #E9E9E9",borderTop:"1px solid #E9E9E9",padding:"10px 0"}},k.a.createElement(p.a,{indeterminate:e.state.indeterminate[a],onChange:e.onCheckAllChange.bind(e,a),checked:e.state.checkAll[a]},n.module_name)),k.a.createElement(A,{options:e.state.boxList[a],value:e.state.checkedList[a],onChange:e.onChange.bind(e,a)}))))})}},{key:"render",value:function(){return k.a.createElement(r.a,{onSubmit:this.handleSubmit,className:"login-form"},k.a.createElement("h1",null,this.state.title,"\u89d2\u8272"),this.Checkboxinit(),k.a.createElement(c.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u63d0\u4ea4"))}}]),t}(b.Component),j=r.a.create()(L);t.default=j}}]);
//# sourceMappingURL=Auth.e8696b04.chunk.js.map